(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[747],{10937:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var s=n(83789),i=n(80318),r=n(67294),a=n(11163),l=n(60590),o=n.n(l),c=n(87893),u=n(43196),d=n(2804),p=n(63569),m=n(89583),f=n(60155),h=n(9336),x=n(85893),v=function(e){var t=e.comment,n=(0,d.sJ)(p.KL),s=(0,r.useState)(!1),i=s[0],l=s[1],c=(0,r.useState)(""),v=c[0],g=c[1],j=(0,r.useState)("#000"),y=j[0],w=j[1];return(0,r.useEffect)((function(){console.log(t),o().api.getDiscussionsByComments({start_author:t.author,start_permlink:t.permlink,limit:10},(function(e,t){console.log(t)}))})),(0,x.jsxs)("div",{className:"text-white bg-gray-600 p-4 rounded-xl border-2 border-gray-800",children:[(0,x.jsx)("h1",{onClick:function(){return a.default.push("/@".concat(t.author))},className:"text-xl font-semibold mb-2 hover:text-blue-200 cursor-pointer",children:t.author}),(0,x.jsxs)("div",{className:"text-white mx-1 whitespace-pre-wrap break-words",children:[(0,x.jsx)(h.Z,{children:t.body}),(0,x.jsxs)("div",{className:"w-auto",children:[(0,x.jsx)("div",{className:"flex",children:(0,x.jsxs)("div",{onClick:function(){return l(!i)},className:"hover:bg-gray-700 px-2 py-1 my-1 rounded-xl cursor-pointer flex items-center gap-2",children:[(0,x.jsx)(m.Bjt,{size:20,color:"#fff",className:"my-3"}),"(",t.replies.length,")"]})}),i&&(0,x.jsxs)("div",{className:"relative flex w-1/2",children:[(0,x.jsx)("input",{type:"text",className:"text-black w-full outline-none p-2 rounded-xl my-2",placeholder:"Write a reply",onChange:function(e){return g(e.target.value)}}),(0,x.jsx)(f.yhK,{color:y,size:25,onMouseEnter:function(){return w("#dcdcdc")},onMouseLeave:function(){return w("#000")},onClick:function(){(0,u.Hi)({author:n.name,body:v,parent_author:t.author,parent_permlink:t.permlink,permlink:"re-previous-".concat(t.author,"-").concat(t.permlink)})},className:"absolute right-4 top-4 cursor-pointer"})]})]})]}),t.replies.map((function(e){var n=document.getElementById("comment-body-".concat(t.id,"-replie-").concat(e.id));return n&&(n.innerHTML=e.body),(0,x.jsxs)("div",{className:"mx-3",children:[(0,x.jsx)("a",{target:"_blank",href:"https://peakd.com/@".concat(e.author),children:(0,x.jsx)("h1",{className:"text-xl font-semibold text-white hover:text-blue-200 cursor-pointer",children:e.author})}),(0,x.jsx)("h1",{id:"comment-body-".concat(t.id,"-replie-").concat(e.id),className:"text-white mx-2"})]})}))]})},g=n(47320),j=n(37039),y=function(){var e,t=new c.Client(["https://api.hive.blog","https://api.hivekings.com","https://anyx.io","https://api.openhive.network"]),n=(0,r.useState)(0),l=n[0],h=n[1],y=(0,r.useState)(""),w=y[0],N=y[1],b=(0,r.useState)([]),k=b[0],_=b[1],S=(0,r.useState)(null),C=S[0],E=S[1],H=(0,r.useState)(!1),J=H[0],L=H[1],O=(0,r.useState)("#000"),z=O[0],A=O[1],I=(0,r.useState)(!1),Z=I[0],B=I[1],D=(0,r.useState)(!1),M=D[0],T=D[1],K=(0,r.useState)(""),X=K[0],q=K[1],P=(0,r.useState)(!1),U=P[0],$=P[1],F=(0,r.useState)(""),V=F[0],G=F[1],R=(0,r.useState)([]),W=R[0],Q=R[1],Y=(0,d.FV)(p.D2),ee=(0,i.Z)(Y,2),te=(ee[0],ee[1]),ne=(0,r.useState)(null),se=ne[0],ie=ne[1],re=(0,d.FV)(p.Lf),ae=(0,i.Z)(re,2),le=ae[0],oe=ae[1],ce=(0,a.useRouter)(),ue=(0,d.sJ)(p.KL),de=ce.query,pe=de.permlink,me=de.author,fe=(0,j.$G)().t;(0,r.useEffect)((function(){if(U){document.title="DLUX | ".concat(se.title);var e=se.json_metadata,t=JSON.parse(e).vrHash,n=JSON.parse(e).scrolling,s=location.href.split("?")[1],i=document.createElement("iframe");i.id="theIframe",i.setAttribute("scrolling",n||"yes"),i.width="100%",i.height="100%",i.setAttribute("allowfullscreen","true"),i.setAttribute("allow","gyroscope; accelerometer; microphone; camera"),i.src="".concat(le,"ipfs/").concat(t,"?").concat(s),document.getElementById("iframe-app")&&document.getElementById("iframe-app").appendChild(i)}}),[U]);var he=function(){(0,u.Ns)(ue.name,V,pe,l).then((function(e){e&&e.success&&te((function(t){return[].concat((0,s.Z)(t),[e])}))}))};(0,r.useEffect)((function(){if(me||ce.push("/"),me&&"@"===me.substr(0,1)){if("https://anywhere.ipfs.dlux.io/"===le){var e=me.substr(1,me.length).replace(".","-");oe("https://".concat(e,".ipfs.dlux.io/"))}G(me.substr(1,me.length))}}),[]);return(0,r.useEffect)((function(){""!==V&&(o().api.getContent(V,pe,(function(e,t){e&&console.log(e),E(JSON.parse(t.json_metadata)),ie(t)})),t.database.call("get_content_replies",[V,pe]).then((function(e){Q(e)})))}),[V]),(0,r.useEffect)((function(){if(C)if(C.app.includes("3speak")){L(!0);var e="https://ipfs.io/ipfs/"+C.video.info.ipfs,t="https://ipfs.io/ipfs/"+C.video.info.ipfsThumbnail;t&&e&&_((function(n){return[].concat((0,s.Z)(n),[{file:e,image:t}])}))}else{var n;(n=C.image&&Array.isArray(C.image)?C.image[0]:"string"==typeof C.image?C.image:C.Hash360&&(C.Hash360,1)?"https://ipfs.io/ipfs/".concat(C.Hash360):"https://www.dlux.io/img/dlux-sdk.png")&&"https"!==n.substr(0,5)&&(n="https://www.dlux.io/img/dlux-sdk.png"),q(n)}}),[C]),U?(0,x.jsxs)("div",{className:"w-full h-screen fixed top-0 left-0 bg-black text-white text-2xl font-bold bg-opacity-70",children:[(0,x.jsxs)("div",{className:"flex px-10 justify-between w-full bg-blue-500",children:[(0,x.jsx)("span",{className:"hover:text-gray-500 cursor-pointer",onClick:function(){document.querySelectorAll("iframe").forEach((function(e){return e.remove()})),$(!1)},children:"DLUX"}),(0,x.jsx)("span",{children:null===se||void 0===se?void 0:se.title})]}),(0,x.jsx)("div",{className:"w-full h-full",id:"iframe-app"})]}):se&&(0,x.jsx)("div",{className:"w-full mx-auto max-w-3xl",children:(0,x.jsxs)("div",{className:"flex justify-evenly flex-col w-full mt-10",children:[J?(0,x.jsx)("div",{className:"w-full flex justify-center my-2",children:(0,x.jsx)(g.Z,{className:"rounded-xl w-4/5",playerId:"my-unique-id",playerScript:"https://cdn.jwplayer.com/libraries/HT7Dts3H.js",playlist:k})}):(0,x.jsx)("div",{className:"flex justify-center w-full my-2",children:(0,x.jsx)("img",{src:X,className:"w-4/5",alt:"appPhoto"})}),JSON.parse(se.json_metadata).vrHash&&(0,x.jsx)("button",{className:"mx-auto px-4 py-2 rounded-lg border-2 text-white bg-blue-500 border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-700",onClick:function(){return $(!0)},children:fe("runApp")}),(0,x.jsxs)("div",{className:"p-5",children:[(0,x.jsx)("h1",{className:"text-white text-3xl",children:null===se||void 0===se?void 0:se.title}),(0,x.jsx)("h1",{className:"text-white text-center sm:mx-3 sm:text-left text-lg",children:null===(e=JSON.parse(se.json_metadata))||void 0===e?void 0:e.description}),(0,x.jsxs)("div",{className:"flex items-center w-full my-5 mx-2 gap-2",children:[Z?(0,x.jsxs)("div",{onClick:he,className:"flex text-white mx-1 gap-2 rounded-xl px-2 py-1 bg-green-500 cursor-pointer",children:[(0,x.jsx)(m.$0H,{size:25,color:"#fff"}),l/100,"%"]}):(0,x.jsx)("div",{className:"px-2 py-1 cursor-pointer",children:(0,x.jsx)(m.$0H,{size:25,color:"#fff",onClick:function(){T(!1),B(!0)}})}),M?(0,x.jsxs)("div",{onClick:he,className:"flex text-white mx-1 gap-2 rounded-xl px-2 py-1 bg-red-500 cursor-pointer",children:[(0,x.jsx)(m.c0u,{size:25,color:"#fff"}),l/100,"%"]}):(0,x.jsx)("div",{className:"px-2 py-1 cursor-pointer",children:(0,x.jsx)(m.c0u,{size:25,color:"#fff",onClick:function(){B(!1),T(!0)}})}),(0,x.jsxs)("h1",{className:"text-white text-xl cursor-pointer",onClick:function(){B(!1),T(!1)},children:["(",se.active_votes.length,")"]})]}),(0,x.jsxs)("div",{className:"w-full",children:[Z&&(0,x.jsx)("input",{className:"my-2 w-full",onChange:function(e){return h(+e.target.value)},type:"range",min:"0",max:"10000",value:"0"}),M&&(0,x.jsx)("input",{className:"my-2 w-full",onChange:function(e){return h(+e.target.value)},type:"range",min:"0",max:"10000",value:"0"})]}),(0,x.jsxs)("div",{className:"my-2",children:[(0,x.jsx)("h1",{className:"text-white border-b-2 border-white pb-1 text-2xl",children:fe("comments")}),(0,x.jsxs)("div",{className:"relative flex",children:[(0,x.jsx)("input",{type:"text",className:"w-full outline-none p-2 rounded-xl my-2",placeholder:fe("writeComment"),onChange:function(e){return N(e.target.value)}}),(0,x.jsx)(f.yhK,{color:z,size:25,onMouseEnter:function(){return A("#dcdcdc")},onMouseLeave:function(){return A("#000")},onClick:function(){(0,u.UI)({author:ue.name,title:"",body:w,parent_author:V,parent_permlink:pe,permlink:"re-previous-".concat(V,"-").concat(pe),json_metadata:JSON.stringify({tags:["hiveio"]})}),N("")},className:"absolute right-4 top-4 cursor-pointer"})]}),(0,x.jsx)("div",{className:"flex flex-col justify-center gap-3 my-3",children:W.map((function(e){return(0,x.jsx)(v,{comment:e},e.id)}))})]})]})]})})}},71425:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[author]/[permlink]",function(){return n(10937)}])}},function(e){e.O(0,[720,260,935,774,888,179],(function(){return t=71425,e(e.s=t);var t}));var t=e.O();_N_E=t}]);