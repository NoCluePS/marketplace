(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[747],{20198:function(e,t,n){"use strict";n.r(t);var s=n(83789),i=n(80318),a=n(67294),l=n(11163),r=n(60590),c=n.n(r),o=n(43196),u=n(2804),f=n(63569),d=n(85893);t.default=function(){var e=(0,a.useState)(0),t=e[0],n=e[1],r=(0,a.useState)(""),p=r[0],h=r[1],m=(0,a.useState)(!0),g=m[0],x=m[1],w=(0,a.useState)(""),v=w[0],b=w[1],N=(0,u.FV)(f.D2),y=(0,i.Z)(N,2),j=(y[0],y[1]),_=(0,a.useState)(null),E=_[0],k=_[1],S=(0,l.useRouter)(),C=(0,u.sJ)(f.KL),A=S.query,O=A.permlink,D=A.author;return(0,a.useEffect)((function(){D||S.push("/"),D&&"@"===D.substr(0,1)&&b(D.substr(1,D.length))}),[]),(0,a.useEffect)((function(){E&&function(){document.title="DLUX | ".concat(E.title);var e=E.json_metadata,t=JSON.parse(e).vrHash,n=JSON.parse(e).scrolling,s=location.href.split("?")[1],i=document.createElement("iframe");i.id="theIframe",i.setAttribute("scrolling",n||"yes"),i.width="100%",i.height="100%",i.setAttribute("allowfullscreen","true"),i.setAttribute("allow","gyroscope; accelerometer; microphone; camera"),i.src="https://anywhere.ipfs.dlux.io/ipfs/".concat(t,"?").concat(s),document.getElementById("iframe-app")&&document.getElementById("iframe-app").appendChild(i)}()}),[E]),(0,a.useEffect)((function(){""!==v&&c().api.getContent(v,O,(function(e,t){e&&console.log(e),console.log(t),function(e){var t;"https"!==(t=e.image&&Array.isArray(e.image)?e.image[0]:"string"==typeof e.image?e.image:e.Hash360&&(e.Hash360,1)?"https://ipfs.io/ipfs/".concat(e.Hash360):"https://www.dlux.io/img/dlux-sdk.png").substr(0,5)&&(t="https://www.dlux.io/img/dlux-sdk.png"),h(t)}(JSON.parse(t.json_metadata)),k(t)}))}),[v]),g?(0,d.jsxs)("div",{className:"w-full h-screen fixed top-0 left-0 bg-black text-white text-2xl font-bold bg-opacity-70",children:[(0,d.jsxs)("div",{className:"flex px-10 justify-between w-full bg-blue-500",children:[(0,d.jsx)("span",{className:"hover:text-gray-500 cursor-pointer",onClick:function(){document.querySelectorAll("iframe").forEach((function(e){return e.remove()})),x(!1)},children:"DLUX"}),(0,d.jsx)("span",{children:null===E||void 0===E?void 0:E.title})]}),(0,d.jsx)("div",{className:"w-full h-full",id:"iframe-app"})]}):(0,d.jsxs)("div",{className:"flex justify-evenly w-full mt-10",children:[(0,d.jsx)("div",{className:"p-5",children:(0,d.jsx)("img",{src:p,alt:"appPhoto",width:600})}),(0,d.jsxs)("div",{className:"p-5",children:[(0,d.jsx)("h1",{className:"text-white text-3xl",children:null===E||void 0===E?void 0:E.title}),(0,d.jsxs)("div",{className:"w-full flex flex-col my-5",children:[(0,d.jsx)("input",{className:"my-2",onChange:function(e){return n(+e.target.value)},type:"range",min:"-1000",max:"1000",value:"-1000"}),(0,d.jsxs)("button",{onClick:function(){(0,o.Ns)(C.name,v,O,t).then((function(e){e&&e.success&&j((function(t){return[].concat((0,s.Z)(t),[e])}))}))},className:"".concat(t<0?"bg-red-500":"bg-green-500"," focus:ring-2 cursor-pointer rounded-xl px-4 py-2 text-white text-xl hover:").concat(t<0?"bg-red-700":"bg-green-700"," focus:").concat(t<0?"ring-red-600":"ring-green-600"),children:[t<0?"Downvote":"Upvote"," (",t,")"]})]})]})]})}},71425:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[author]/[permlink]",function(){return n(20198)}])}},function(e){e.O(0,[774,888,179],(function(){return t=71425,e(e.s=t);var t}));var t=e.O();_N_E=t}]);